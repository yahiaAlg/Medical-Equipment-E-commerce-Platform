{% extends 'base.html' %}
{% load static %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section text-white">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 hero-content">
                <h1 class="hero-title">Premium Medical Equipment for Healthcare Professionals</h1>
                <p class="hero-subtitle">Discover cutting-edge medical devices and equipment from trusted brands. Serving hospitals, clinics, and healthcare providers worldwide.</p>
                <div class="hero-buttons" style="opacity: 0; transform: translateY(30px);">
                    <a href="{% url 'products:list' %}" class="btn btn-light btn-custom me-3">
                        <i class="fas fa-search me-2"></i>Browse Products
                    </a>
                    <a href="{% url 'pages:contact' %}" class="btn btn-outline-light btn-custom">
                        <i class="fas fa-phone me-2"></i>Get Quote
                    </a>
                </div>
            </div>
            <div class="col-lg-6 text-center">
                <img src="https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg?auto=compress&cs=tinysrgb&w=600" alt="Medical Equipment" class="img-fluid rounded" style="max-height: 500px;">
            </div>
        </div>
    </div>
</section>

<!-- Services Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-12">
                <h2 class="display-5 fw-bold mb-3">Our Services</h2>
                <p class="lead text-muted">Comprehensive medical equipment solutions for every healthcare need</p>
            </div>
        </div>
        
        <div class="row g-4">
            <div class="col-md-4 animate-on-scroll">
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-stethoscope"></i>
                    </div>
                    <h5 class="mb-3">Diagnostic Equipment</h5>
                    <p class="text-muted">Advanced diagnostic tools and imaging equipment for accurate patient assessment and monitoring.</p>
                </div>
            </div>
            
            <div class="col-md-4 animate-on-scroll">
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-heartbeat"></i>
                    </div>
                    <h5 class="mb-3">Patient Monitoring</h5>
                    <p class="text-muted">State-of-the-art monitoring systems for continuous patient care and vital sign tracking.</p>
                </div>
            </div>
            
            <div class="col-md-4 animate-on-scroll">
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-procedures"></i>
                    </div>
                    <h5 class="mb-3">Surgical Equipment</h5>
                    <p class="text-muted">Precision surgical instruments and equipment for safe and effective medical procedures.</p>
                </div>
            </div>
            
            <div class="col-md-4 animate-on-scroll">
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-microscope"></i>
                    </div>
                    <h5 class="mb-3">Laboratory Equipment</h5>
                    <p class="text-muted">Complete laboratory solutions including analyzers, microscopes, and testing equipment.</p>
                </div>
            </div>
            
            <div class="col-md-4 animate-on-scroll">
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-wheelchair"></i>
                    </div>
                    <h5 class="mb-3">Mobility Solutions</h5>
                    <p class="text-muted">Comprehensive mobility aids and rehabilitation equipment for patient care and recovery.</p>
                </div>
            </div>
            
            <div class="col-md-4 animate-on-scroll">
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h5 class="mb-3">Safety & Protection</h5>
                    <p class="text-muted">Personal protective equipment and safety solutions for healthcare workers and patients.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Featured Products -->
{% if featured_products %}
<section class="py-5">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-12">
                <h2 class="display-5 fw-bold mb-3">Featured Products</h2>
                <p class="lead text-muted">Discover our most popular medical equipment and devices</p>
            </div>
        </div>
        
        <div class="row g-4">
            {% for product in featured_products %}
            <div class="col-md-6 col-lg-3">
                <div class="card product-card">
                    {% if product.images.first %}
                        <img src="{{ product.images.first.image.url }}" class="card-img-top product-image" alt="{{ product.name }}">
                    {% else %}
                        <img src="https://images.pexels.com/photos/40568/medical-appointment-doctor-healthcare-40568.jpeg?auto=compress&cs=tinysrgb&w=400" class="card-img-top product-image" alt="{{ product.name }}">
                    {% endif %}
                    
                    <div class="card-body">
                        <h6 class="card-title">{{ product.name|truncatechars:50 }}</h6>
                        <p class="card-text text-muted small">{{ product.short_description|truncatechars:80 }}</p>
                        
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <div class="product-rating">
                                {% for i in "12345"|make_list %}
                                    {% if forloop.counter <= product.get_average_rating %}
                                        <i class="fas fa-star"></i>
                                    {% else %}
                                        <i class="far fa-star"></i>
                                    {% endif %}
                                {% endfor %}
                                <small class="text-muted">({{ product.get_review_count }})</small>
                            </div>
                            <span class="price-tag">${{ product.price }}</span>
                        </div>
                        
                        <div class="d-flex gap-2">
                            <a href="{{ product.get_absolute_url }}" class="btn btn-outline-primary btn-sm flex-fill">
                                <i class="fas fa-eye"></i> View
                            </a>
                            {% if user.is_authenticated %}
                            <button class="btn btn-primary btn-sm add-to-cart" data-product-id="{{ product.id }}">
                                <i class="fas fa-cart-plus"></i>
                            </button>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-5">
            <a href="{% url 'products:list' %}" class="btn btn-primary btn-lg">
                View All Products <i class="fas fa-arrow-right ms-2"></i>
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- Trending Products Carousel -->
{% if trending_products %}
<section class="py-5 bg-light">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-12">
                <h2 class="display-5 fw-bold mb-3">Trending Products</h2>
                <p class="lead text-muted">Most popular items this month</p>
            </div>
        </div>
        
        <div class="row g-4">
            {% for product in trending_products %}
            <div class="col-md-6 col-lg-4">
                <div class="card product-card">
                    {% if product.images.first %}
                        <img src="{{ product.images.first.image.url }}" class="card-img-top product-image" alt="{{ product.name }}">
                    {% else %}
                        <img src="https://images.pexels.com/photos/356040/pexels-photo-356040.jpeg?auto=compress&cs=tinysrgb&w=400" class="card-img-top product-image" alt="{{ product.name }}">
                    {% endif %}
                    
                    <div class="card-body">
                        <div class="badge bg-danger position-absolute top-0 end-0 m-2">
                            <i class="fas fa-fire me-1"></i>Trending
                        </div>
                        
                        <h6 class="card-title">{{ product.name|truncatechars:50 }}</h6>
                        <p class="card-text text-muted small">{{ product.short_description|truncatechars:80 }}</p>
                        
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <div class="product-rating">
                                {% for i in "12345"|make_list %}
                                    {% if forloop.counter <= product.get_average_rating %}
                                        <i class="fas fa-star"></i>
                                    {% else %}
                                        <i class="far fa-star"></i>
                                    {% endif %}
                                {% endfor %}
                            </div>
                            <span class="price-tag">${{ product.price }}</span>
                        </div>
                        
                        <div class="d-flex gap-2">
                            <a href="{{ product.get_absolute_url }}" class="btn btn-outline-primary btn-sm flex-fill">
                                View Details
                            </a>
                            {% if user.is_authenticated %}
                            <button class="btn btn-primary btn-sm add-to-cart" data-product-id="{{ product.id }}">
                                <i class="fas fa-cart-plus"></i>
                            </button>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Testimonials -->
{% if testimonials %}
<section class="py-5">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-12">
                <h2 class="display-5 fw-bold mb-3">What Our Clients Say</h2>
                <p class="lead text-muted">Trusted by healthcare professionals worldwide</p>
            </div>
        </div>
        
        <div class="row g-4 testimonial-carousel">
            {% for testimonial in testimonials %}
            <div class="col-md-6 col-lg-4">
                <div class="testimonial-card">
                    <div class="d-flex align-items-center mb-3">
                        {% if testimonial.image %}
                            <img src="{{ testimonial.image.url }}" alt="{{ testimonial.name }}" class="testimonial-avatar me-3">
                        {% else %}
                            <div class="testimonial-avatar bg-primary text-white d-flex align-items-center justify-content-center me-3">
                                {{ testimonial.name|first }}
                            </div>
                        {% endif %}
                        <div>
                            <h6 class="mb-1">{{ testimonial.name }}</h6>
                            <small class="text-muted">{{ testimonial.position }}<br>{{ testimonial.company }}</small>
                        </div>
                    </div>
                    
                    <div class="product-rating mb-3">
                        {% for i in "12345"|make_list %}
                            {% if forloop.counter <= testimonial.rating %}
                                <i class="fas fa-star"></i>
                            {% else %}
                                <i class="far fa-star"></i>
                            {% endif %}
                        {% endfor %}
                    </div>
                    
                    <p class="text-muted">{{ testimonial.content }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- CTA Section -->
<section class="py-5 bg-primary text-white">
    <div class="container">
        <div class="row text-center">
            <div class="col-12">
                <h2 class="display-5 fw-bold mb-3">Ready to Upgrade Your Medical Equipment?</h2>
                <p class="lead mb-4">Join thousands of healthcare professionals who trust MedEquip Pro for their equipment needs</p>
                <div class="d-flex flex-column flex-md-row gap-3 justify-content-center">
                    <a href="{% url 'products:list' %}" class="btn btn-light btn-lg">
                        <i class="fas fa-search me-2"></i>Browse Catalog
                    </a>
                    <a href="{% url 'pages:contact' %}" class="btn btn-outline-light btn-lg">
                        <i class="fas fa-phone me-2"></i>Request Quote
                    </a>
                    {% if not user.is_authenticated %}
                    <a href="{% url 'accounts:register' %}" class="btn btn-warning btn-lg">
                        <i class="fas fa-user-plus me-2"></i>Create Account
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Contact Form Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="text-center mb-5">
                    <h2 class="display-5 fw-bold mb-3">Get in Touch</h2>
                    <p class="lead text-muted">Have questions? Our team is here to help you find the right medical equipment</p>
                </div>
                
                <div class="card shadow-sm">
                    <div class="card-body p-5">
                        <form method="post" action="{% url 'pages:contact' %}" class="needs-validation" novalidate>
                            {% csrf_token %}
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="id_name" class="form-label">Full Name</label>
                                    <input type="text" class="form-control" name="name" id="id_name" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="id_email" class="form-label">Email Address</label>
                                    <input type="email" class="form-control" name="email" id="id_email" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="id_phone" class="form-label">Phone Number</label>
                                    <input type="tel" class="form-control" name="phone" id="id_phone">
                                </div>
                                <div class="col-md-6">
                                    <label for="id_inquiry_type" class="form-label">Inquiry Type</label>
                                    <select class="form-control" name="inquiry_type" id="id_inquiry_type" required>
                                        <option value="">Select inquiry type</option>
                                        <option value="general">General Inquiry</option>
                                        <option value="technical">Technical Support</option>
                                        <option value="partnership">Partnership</option>
                                        <option value="complaint">Complaint</option>
                                    </select>
                                </div>
                                <div class="col-12">
                                    <label for="id_subject" class="form-label">Subject</label>
                                    <input type="text" class="form-control" name="subject" id="id_subject" required>
                                </div>
                                <div class="col-12">
                                    <label for="id_message" class="form-label">Message</label>
                                    <textarea class="form-control" name="message" id="id_message" rows="5" required></textarea>
                                </div>
                                <div class="col-12 text-center">
                                    <button type="submit" class="btn btn-primary btn-lg px-5">
                                        <i class="fas fa-paper-plane me-2"></i>Send Message
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Google Maps -->
<section class="py-0">
    <div class="container-fluid p-0">
        <div class="embed-responsive embed-responsive-21by9" style="height: 400px;">
            <iframe 
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3024.123456789!2d-74.0059728!3d40.7127837!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zNDDCsDQyJzQ2LjAiTiA3NMKwMDAnMjEuNSJX!5e0!3m2!1sen!2sus!4v1234567890"
                width="100%" 
                height="100%" 
                style="border:0;" 
                allowfullscreen="" 
                loading="lazy">
            </iframe>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
// Additional homepage specific JavaScript
document.addEventListener('DOMContentLoaded', function() {
    // Animate statistics or counters
    const stats = document.querySelectorAll('.stat-number');
    stats.forEach(stat => {
        const target = parseInt(stat.textContent);
        const increment = target / 100;
        let current = 0;
        
        const updateCounter = () => {
            if (current < target) {
                current += increment;
                stat.textContent = Math.ceil(current);
                setTimeout(updateCounter, 20);
            } else {
                stat.textContent = target;
            }
        };
        
        // Start animation when element is in view
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    updateCounter();
                    observer.unobserve(entry.target);
                }
            });
        });
        
        observer.observe(stat);
    });
});
</script>
{% endblock %}