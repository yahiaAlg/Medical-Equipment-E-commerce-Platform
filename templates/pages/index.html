{% extends 'base.html' %}
{% load static %}

{% block title %}Fennec Med - Premium Medical Equipment{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/index.css' %}">
<link rel="stylesheet" href="{% static 'css/mediaQuery.css' %}">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
  <h1>Welcome to Fennec Med</h1>
  <p>
    Providing quality medical materials to families across the region since
    2022.
  </p>
  <div class="hero-buttons">
    <a href="{% url 'pages:contact' %}" class="btn btn-call">Call Us</a>
    {% if user.is_authenticated %}
      <a href="{% url 'accounts:dashboard' %}" class="btn btn-login">Dashboard</a>
    {% else %}
      <a href="{% url 'accounts:login' %}" class="btn btn-login">Login</a>
    {% endif %}
  </div>
</section>

<!-- About Us Section -->
<section class="about-us-section">
  <div class="about-us-container">
    <div class="about-us-image">
      <img src="{% static 'images/aboutUs-section.png' %}" alt="Fennec Med" />
    </div>
    <div class="about-us-content">
      <h2>About Our Brighton-Based Practice</h2>
      {% if site_info.about_hero_description %}
        {{ site_info.about_hero_description }}
      {% else %}
        <p>
          We know visiting the doctor can feel a bit daunting. At Newbay
          Medical Clinic, we've shaped our practice to make every visit feel
          safe, calm, and comfortable. We keep our space clean and welcoming,
          and we're mindful of your time—so you can focus on feeling cared
          for, not stressed.
        </p>
      {% endif %}
      <a href="{% url 'pages:about' %}" class="btn btn-learn-more">Learn More About Us</a>
    </div>
  </div>
</section>

<!-- Products Section -->
{% if featured_products %}
<section class="products-section">
  <h2 class="h2-p">Our Products</h2>
  <div class="products-container">
    {% for product in featured_products %}
    <div class="product-card">
      <div class="product-image">
        {% if product.images.first %}
          <img src="{{ product.images.first.image.url }}" alt="{{ product.name }}" />
        {% else %}
          <img src="{% static 'images/prdct1.png' %}" alt="{{ product.name }}" />
        {% endif %}
      </div>
      <h3>{{ product.short_description|truncatechars:80 }}</h3>
      <p class="product-price">
        {% if product.bulk_price %}
          {{ product.bulk_price }} - {{ product.price }} DZD
        {% else %}
          {{ product.price }} DZD
        {% endif %}
      </p>
      <a href="{{ product.get_absolute_url }}" class="btn btn-view-details">View Details</a>
    </div>
    {% endfor %}
  </div>
</section>
{% endif %}

<!-- Specialties Section -->
<section class="specialties-section">
  <h2 class="h2-specialty">Our Specialties</h2>
  <div class="specialties-container">
    {% for category in categories %}
    <div class="specialty-card">
      <div class="specialty-icon">
          {% if category.image %}
          <a href="{% url 'products:list' %}?category={{ category.slug }}">
            <img src="{{ category.image.url }}" alt="{{ category.name }} Icon" />
          </a>
          {% else %}
          <a href="{% url 'products:list' %}?category={{ category.slug }}">
            <img src="{% static 'images/specialties-'|add:category.slug|add:'.png' %}" alt="{{ category.name }} Icon" />
          </a>
          {% endif %}
      </div>
      <h3>{{ category.name }}</h3>
    </div>
    {% endfor %}
  </div>
</section>

<!-- Testimonials -->
{% if testimonials %}
<section class="testimonial-section">
  <h2>What Our Customers Say</h2>
  <div class="testimonial-container">
    {% for testimonial in testimonials %}
    <div class="testimonial-card">
      <p class="testimonial-text">
        "{{ testimonial.content }}"
      </p>
      <p class="testimonial-author">- {{ testimonial.name }}</p>
      <div class="rating">
        {% for i in "12345" %}
          {% if forloop.counter <= testimonial.rating %}★{% else %}☆{% endif %}
        {% endfor %}
      </div>
    </div>
    {% endfor %}
  </div>
</section>
{% endif %}

<!-- Trending Products -->
{% if trending_products %}
<section class="products-section" style="background-color: #f0f4f8;">
  <h2 class="h2-p" style="color: #34588f;">Trending Products</h2>
  <div class="products-container">
    {% for product in trending_products %}
    <div class="product-card">
      <div class="product-image">
        {% if product.images.first %}
          <img src="{{ product.images.first.image.url }}" alt="{{ product.name }}" />
        {% else %}
          <img src="{% static 'images/prdct1.png' %}" alt="{{ product.name }}" />
        {% endif %}
      </div>
      <h3>{{ product.short_description|truncatechars:80 }}</h3>
      <p class="product-price">{{ product.price }} DZD</p>
      <a href="{{ product.get_absolute_url }}" class="btn btn-view-details">View Details</a>
    </div>
    {% endfor %}
  </div>
</section>
{% endif %}

<!-- Find Us Section -->
<section class="find-us-section">
  <h2>Where To Find Us</h2>
  <p>
    Looking for your new go-to Fennec Med in Brighton and Bayside?
    Newbay Medical is based in the Brighton area, offering care to anyone in
    and around Brighton; including <a href="#">Caulfield South</a>,
    <a href="#">Elwood</a>, <a href="#">Bentleigh</a>,
    <a href="#">Gardenvale</a>, <a href="#">Hampton</a>,
    <a href="#">Sandringham</a>. If you're from the Brighton area and want a
    local medical practice you know you can trust when things get tough,
    we're ready to take your call.
  </p>
</section>

<section class="map-section">
  <div class="map-container">
    <iframe
      src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3151.83512499764!2d145.000000!3d-37.900000!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMzfCsDU2JzI4LjQiTiAxNjXCsDMwJzQ5LjYiUyA!5e0!3m2!1sen!2sau!4v1234567890123"
      width="100%"
      height="450"
      style="border: 0"
      allowfullscreen=""
      loading="lazy"
    ></iframe>
  </div>
</section>

<!-- CTA Section -->
<section class="cta-section">
  <h2>Ready to Take the Next Step?</h2>
  <p>
    Contact us today to learn more about our medical materials and services.
  </p>
  {% if user.is_authenticated %}
    <a href="{% url 'products:list' %}" class="btn btn-cta">Browse Products</a>
  {% else %}
    <a href="{% url 'accounts:register' %}" class="btn btn-cta">Get Started</a>
  {% endif %}
</section>
{% endblock %}

{% block extra_js %}
<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
<script src="{% static 'js/index.js' %}"></script>
{% endblock %}